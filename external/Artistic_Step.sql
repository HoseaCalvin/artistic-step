-- Use MySQL Database (via XAMPP Control Panel)

CREATE DATABASE artistic_step

CREATE TABLE MsCustomer(
	CustomerID CHAR(5) PRIMARY KEY CHECK (CustomerID LIKE 'CU___'),
	CustomerName VARCHAR(250) NOT NULL,
	CustomerEmail VARCHAR(100) NOT NULL,
	CustomerDOB DATE NOT NULL,
	CustomerGender VARCHAR(20) NOT NULL,
	CustomerPassword VARCHAR(25) NOT NULL
);

CREATE TABLE MsBrand(
	BrandID CHAR(5) PRIMARY KEY CHECK (BrandID LIKE 'BR___'),
	BrandName VARCHAR(150)
);

CREATE TABLE MsShoes(
	ShoesID CHAR(5) PRIMARY KEY CHECK (ShoesID LIKE 'SH___'),
	ShoesName VARCHAR(150) NOT NULL,
	BrandID CHAR(5) NOT NULL,
	ShoesPrice INT NOT NULL,
	ShoesPicture MEDIUMBLOB NOT NULL,
	FOREIGN KEY (BrandID) REFERENCES MsBrand(BrandID) ON UPDATE CASCADE ON DELETE CASCADE
);

CREATE TABLE Cart(
	CustomerID CHAR(5),
	ShoesID CHAR(5),
	Color VARCHAR(20) NOT NULL,
	Quantity INT NOT NULL,
	PRIMARY KEY (CustomerID, ShoesID),
	FOREIGN KEY (CustomerID) REFERENCES MsCustomer(CustomerID) ON UPDATE CASCADE ON DELETE CASCADE,
	FOREIGN KEY (ShoesID) REFERENCES MsShoes(ShoesID) ON UPDATE CASCADE ON DELETE CASCADE
);

CREATE TABLE TransactionHistory(
	TransactionID CHAR(5) PRIMARY KEY CHECK (TransactionID LIKE 'TR___'),
	CustomerID CHAR(5),
	ShoesID CHAR(5),
	TransactionDate DATE NOT NULL,
	Color VARCHAR(20) NOT NULL,
	Quantity INT NOT NULL,
	FOREIGN KEY (CustomerID) REFERENCES MsCustomer(CustomerID),
	FOREIGN KEY (ShoesID) REFERENCES MsShoes(ShoesID)
);